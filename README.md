# 物理实验科学计算器 - 用户手册

## 概述

这是一个专门为物理实验设计的科学计算器，支持电路计算、误差分析等功能。**核心特色是创新的 `|` 并联运算符**，可以直接对数值进行并联计算，无需创建复杂的对象结构。

### 🎯 设计理念
- **串联计算**: 使用 `R(10k) + R(20k)` 创建完整的电阻对象
- **并联计算**: 使用 `10k | 20k` 直接对数值进行快速并联运算
- **灵活切换**: 根据需要选择对象模式或数值模式

## 快速开始

### 环境要求
- Python 3.6 或更高版本
- 无需安装额外的第三方库

### 启动计算器
```bash
cd "path/to/Experiment data compute"
python cir_exper.py
```

启动后你会看到：
```
============================================================
🔬 物理实验科学计算器 - Physics Lab Calculator 🔬
============================================================
💡 专为物理实验设计的智能计算器

🚀 快速上手指南:
  📏 单位后缀: 10k, 1.5M, 200n (支持 G/M/k/m/u/n)
  ⚡ 串联电阻: R(10k) + R(20k)  [返回 Resistor 对象]
  🔗 并联电阻: 10k | 20k        [直接数值计算，返回数值]
  📊 误差计算: 10.5 % 10        [测量值 % 真实值]
  💾 变量存储: result = 10k | 20k

🎯 设计亮点: | 运算符让并联计算更直观，无需创建对象!
⏰ 退出方式: 输入 'exit' 或按 Ctrl-D(Linux,macOS), Ctrl-Z+enter (Windows)
============================================================

>>>
```

## 基本使用

### 1. 电阻计算

#### 串联电阻（使用 `+`）- 对象模式
```
>>> R(10k) + R(20k)
  Resistor(30000.0 Ω)
```

#### 并联电阻（使用 `|`）- 数值模式  
```
>>> 10k | 20k        # 直接对数值进行并联计算
  6666.666666666667
```

#### 混合计算
```
>>> R(5k) + (10k | 20k)    # 串联一个5k电阻和10k||20k的并联结果
  Resistor(11666.666666666666 Ω)
```

#### 复杂并联链
```
>>> 10k | 20k | 30k       # 三个电阻并联
  5454.545454545454

>>> (10k | 20k) | 30k     # 等效写法
  5454.545454545454
```

### 2. 误差分析

#### 百分比误差（使用 `%`）
```
>>> 10.5 % 10        # 测量值 vs 真实值
  0.05               # 结果为5%的相对误差
```

### 3. 单位后缀

支持的单位后缀：
- **大单位**：`G` (10⁹), `M` (10⁶), `k` (10³)
- **小单位**：`m` (10⁻³), `u` (10⁻⁶), `n` (10⁻⁹)

```
>>> R(1.5M)    # 1.5兆欧
  Resistor(1500000.0 Ω)

>>> R(2.2k)    # 2.2千欧
  Resistor(2200.0 Ω)

>>> R(100n)    # 100纳欧
  Resistor(1e-07 Ω)
```

### 4. 变量使用

#### 定义变量
```
>>> r1 = R(10k)           # 对象变量
  r1 = Resistor(10000.0 Ω)

>>> parallel_val = 10k | 20k    # 数值变量
  parallel_val = 6666.666666666667
```

#### 使用变量进行计算
```
>>> total = r1 + R(parallel_val)    # 对象与数值混合
  total = Resistor(16666.666666666666 Ω)

>>> another_parallel = parallel_val | 30k    # 数值并联
  another_parallel = 5454.545454545454
```

#### 使用上一个结果
```
>>> 5k | 3k
  1875.0

>>> _                    # 特殊变量 _ 保存上一次计算结果
  1875.0

>>> _ | 10k              # 可以继续使用上一个结果
  1578.9473684210527
```

>>> _                # 特殊变量 _ 保存上一个结果
  Resistor(8000.0 Ω)
```

## 支持的功能

### 两种计算模式

#### 🎯 对象模式 - 使用 `R()` 构造器
- **用途**: 需要保留完整电阻信息时使用
- **语法**: `R(10k) + R(20k)`
- **返回**: Resistor对象，包含完整的电阻信息
- **适用于**: 串联计算、需要对象属性的场景

#### ⚡ 数值模式 - 直接数值计算  
- **用途**: 快速并联计算，只需要数值结果
- **语法**: `10k | 20k`  
- **返回**: 浮点数，直接的电阻值
- **适用于**: 并联计算、误差分析、中间计算

### 运算符

| 符号 | 功能 | 输入类型 | 返回类型 | 示例 |
|------|------|----------|----------|------|
| `+` | 电阻串联 | Resistor对象 | Resistor对象 | `R(10k) + R(20k)` |
| `\|` | 电阻并联 | 数值 | 数值 | `10k \| 20k` |
| `%` | 百分比误差 | 数值 | 数值 | `10.5 % 10` |

### 内置函数

- **`R(value)`**: 创建电阻，支持单位后缀
- **特殊变量 `_`**: 自动保存上一次计算结果

## 实用技巧

### 1. 混合计算模式
```
>>> series_part = R(1k) + R(2k)      # 串联部分(对象)
  series_part = Resistor(3000.0 Ω)

>>> parallel_part = 3k | 6k          # 并联部分(数值)  
  parallel_part = 2000.0

>>> total = series_part + R(parallel_part)    # 组合计算
  total = Resistor(5000.0 Ω)
```

### 2. 快速并联计算链
```
>>> # 多个电阻并联 - 从左到右计算
>>> result = 10k | 20k | 30k | 40k
  result = 4800.0

>>> # 等效的分步计算
>>> step1 = 10k | 20k              # 6666.67Ω
>>> step2 = step1 | 30k            # 4000Ω  
>>> step3 = step2 | 40k            # 2285.71Ω
```

### 3. 误差分析工作流
```
>>> theoretical = 10k | 20k         # 理论值
  theoretical = 6666.666666666667

>>> measured = 6500                 # 测量值
  measured = 6500

>>> error = measured % theoretical  # 计算误差
  error = 0.025                     # 2.5%误差
```

## 退出方式

- 输入 `exit` 并按回车
- 按 `Ctrl+D` (Unix/Linux/Mac) 或 `Ctrl+Z` (Windows)

## 常见问题

### Q: 为什么有些计算结果显示的是对象？
A: 串联运算（`+`）返回的是Resistor对象，显示完整信息。并联运算（`|`）和误差计算（`%`）返回数值。

### Q: 如何查看变量的数值？
A: 对于Resistor对象，可以访问其`.resistance`属性：
```
>>> r = R(10k)
>>> r.resistance
  10000.0
```

### Q: 单位后缀不区分大小写吗？
A: 区分大小写！`k`是千，`K`不被识别。`M`是兆，`m`是毫。

### Q: 可以使用科学计数法吗？
A: 可以！例如：`R(1e3)` 等同于 `R(1k)`

## 错误处理

常见错误信息：
- `'xxx' is not a valid variable name.` - 变量名不合法
- `invalid syntax` - 表达式语法错误
- `name 'xxx' is not defined` - 使用了未定义的变量

## 获得帮助

如果遇到问题：
1. 检查表达式语法是否正确
2. 确认使用的变量已经定义
3. 查看开发文档了解更多技术细节
4. 提交Issue报告问题

---

**提示**: 想了解更多技术细节、扩展功能或参与开发？请查看 [开发文档](DEVELOPER.md)。